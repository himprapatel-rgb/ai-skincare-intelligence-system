"""\nUser Profile Pydantic Schemas\n\nSRS Traceability:\n- UR1: Create account, define goals, and specify primary concerns\n- FR46: Profile management\n- NFR4: AES-256 encryption for sensitive data\n\nSprint: 1.2 - Story 1.2, 1.6\n"""\n\nfrom pydantic import BaseModel, Field, field_validator\nfrom datetime import datetime\nfrom typing import List, Optional\nfrom uuid import UUID\n\n\nclass ProfileCreate(BaseModel):\n    """Schema for creating baseline user profile during onboarding."""\n    goals: List[str] = Field(\n        ...,\n        min_length=1,\n        max_length=3,\n        description="User skincare goals (1-3 selections)"\n    )\n    concerns: List[str] = Field(\n        ...,\n        min_length=1,\n        max_length=5,\n        description="Primary skin concerns (1-5 selections)"\n    )\n    skin_type: str = Field(\n        ...,\n        description="Skin type: oily, dry, combination, sensitive, normal"\n    )\n    routine_frequency: str = Field(\n        ...,\n        description="Current routine frequency"\n    )\n    climate: str = Field(\n        ...,\n        description="Climate zone"\n    )\n\n    @field_validator('goals')\n    @classmethod\n    def validate_goals(cls, v):\n        if not (1 <= len(v) <= 3):\n            raise ValueError('Goals must be 1-3 selections')\n        return v\n\n    @field_validator('concerns')\n    @classmethod\n    def validate_concerns(cls, v):\n        if not (1 <= len(v) <= 5):\n            raise ValueError('Concerns must be 1-5 selections')\n        return v\n\n    @field_validator('skin_type')\n    @classmethod\n    def validate_skin_type(cls, v):\n        valid_types = ['oily', 'dry', 'combination', 'sensitive', 'normal']\n        if v.lower() not in valid_types:\n            raise ValueError(f'Skin type must be one of: {valid_types}')\n        return v.lower()\n\n    class Config:\n        json_schema_extra = {\n            "example": {\n                "goals": ["anti_aging", "hydration"],\n                "concerns": ["fine_lines", "dryness"],\n                "skin_type": "combination",\n                "routine_frequency": "twice_daily",\n                "climate": "temperate"\n            }\n        }\n\n\nclass ProfileUpdate(BaseModel):\n    """Schema for updating user profile."""\n    goals: Optional[List[str]] = Field(\n        None,\n        min_length=1,\n        max_length=3\n    )\n    concerns: Optional[List[str]] = Field(\n        None,\n        min_length=1,\n        max_length=5\n    )\n    skin_type: Optional[str] = None\n    routine_frequency: Optional[str] = None\n    climate: Optional[str] = None\n\n    @field_validator('goals')\n    @classmethod\n    def validate_goals(cls, v):\n        if v and not (1 <= len(v) <= 3):\n            raise ValueError('Goals must be 1-3 selections')\n        return v\n\n    @field_validator('concerns')\n    @classmethod\n    def validate_concerns(cls, v):\n        if v and not (1 <= len(v) <= 5):\n            raise ValueError('Concerns must be 1-5 selections')\n        return v\n\n\nclass ProfileResponse(BaseModel):\n    """Schema for profile response."""\n    id: UUID\n    user_id: UUID\n    goals: List[str]\n    concerns: List[str]\n    skin_type: str\n    routine_frequency: str\n    climate: str\n    profile_complete: bool\n    created_at: datetime\n    updated_at: datetime\n\n    class Config:\n        from_attributes = True
